# スラッシュコマンド評価基準

## 総合評価グレード

**A (優秀)**: すべての次元で高品質、ベストプラクティスを完全に遵守
**B (良好)**: ほとんどの次元で良好、軽微な改善点のみ
**C (普通)**: 基本的には機能するが、複数の改善点あり
**D (要改善)**: 重大な問題や設計の欠陥あり
**F (不合格)**: 基本要件を満たしていない、または危険

## 評価次元

### 1. フロントマター品質 (Metadata Quality)

#### A - 優秀
- `description`が明確で具体的（目的が一目でわかる）
- `argument-hint`が提供され、使用方法が明確
- 適切な`model`選択（タスクの複雑さに応じて）
- `allowed-tools`で適切な制限（必要な場合）
- `disable-model-invocation`が適切に設定（必要な場合）

#### B - 良好
- `description`が存在し、ある程度明確
- `argument-hint`がない、または部分的
- その他のフィールドは適切

#### C - 普通
- `description`が曖昧または一般的すぎる
- 引数が必要なのに`argument-hint`がない
- フロントマターがないまたは最小限

#### D - 要改善
- `description`が誤解を招く
- 必要なフィールドが不適切に設定されている

#### F - 不合格
- フロントマターが完全に欠落
- YAMLフォーマットエラー

### 2. 引数処理 (Argument Handling)

#### A - 優秀
- 引数の使用が明確かつ予測可能
- `$1`, `$2`または`$ARGUMENTS`を適切に使用
- 引数のバリデーションやガイダンスを含む
- デフォルト値や省略可能な引数を適切に処理

#### B - 良好
- 引数を正しく使用
- 軽微なバリデーション不足

#### C - 普通
- 引数を使用するが、説明不足
- エラー処理なし

#### D - 要改善
- 引数の誤った使用または混乱を招く使用
- 必要な引数が明示されていない

#### F - 不合格
- 引数構文エラー
- 引数が必要なのに処理されていない

### 3. 動的機能の活用 (Dynamic Features)

#### A - 優秀
- `!`プレフィックス（Bash統合）を安全かつ効果的に使用
- `@`プレフィックス（ファイル参照）を適切に使用
- 実行前のコンテキスト収集が効率的
- エラーハンドリングの考慮あり

#### B - 良好
- 動的機能を使用しているが、最適化の余地あり
- 基本的なエラーハンドリング

#### C - 普通
- 動的機能を使用していない（使用すべき場合）
- 使用しているが非効率

#### D - 要改善
- 動的機能の誤った使用
- セキュリティリスクを考慮していない

#### F - 不合格
- 危険なBashコマンド（`rm -rf /`など）
- 任意のファイルアクセスを許可

### 4. スコープと構造 (Scope and Structure)

#### A - 優秀
- 適切なスコープ選択（プロジェクトvs個人用）
- 名前空間を効果的に使用
- ファイル名とパスが命名規則に従っている
- 単一責任原則を遵守

#### B - 良好
- スコープは適切だが、構造に小さな改善の余地
- 名前空間なし（あった方が良い場合）

#### C - 普通
- スコープが不明確
- 構造が混乱している

#### D - 要改善
- 誤ったスコープ選択
- ファイル配置が不適切

#### F - 不合格
- 構造が完全に壊れている

### 5. スキルとの境界 (Skill Boundary)

#### A - 優秀
- スラッシュコマンドとして適切な複雑さ
- 単一ファイルで完結
- 複雑すぎる場合はスキル化を推奨

#### B - 良好
- ほぼ適切だが、わずかに複雑すぎる可能性
- 将来的にスキル化を検討すべき

#### C - 普通
- 複雑すぎる（スキル化すべき）
- 複数ステップのワークフローを含む

#### D - 要改善
- 明らかにスキルとして実装すべき
- 外部スクリプトや大量のロジックを含む

#### F - 不合格
- スラッシュコマンドの範囲を完全に超えている

### 6. セキュリティとベストプラクティス (Security and Best Practices)

#### A - 優秀
- コマンドインジェクション対策あり
- ファイルアクセス制限あり
- `allowed-tools`で適切に制限
- 入力バリデーション実装
- 危険な操作には警告

#### B - 良好
- 基本的なセキュリティ考慮
- 軽微な脆弱性の可能性

#### C - 普通
- セキュリティ考慮が不十分
- ベストプラクティスを部分的に無視

#### D - 要改善
- 重大なセキュリティリスク
- ベストプラクティス違反

#### F - 不合格
- 明白な脆弱性（任意コード実行など）
- データ損失のリスク

## レビューチェックリスト

### フロントマター

- [ ] YAMLフォーマットが正しい（`---`で囲まれている）
- [ ] `description`が存在し、明確
- [ ] 引数を使用する場合、`argument-hint`が提供されている
- [ ] `model`の選択が適切（必要な場合）
- [ ] `allowed-tools`が適切に設定（必要な場合）
- [ ] `disable-model-invocation`が適切（必要な場合）

### 引数処理

- [ ] `$ARGUMENTS`または`$1`, `$2`を適切に使用
- [ ] 引数の説明がコマンド本文に含まれている
- [ ] 必須vs省略可能な引数が明確
- [ ] デフォルト値が適切に処理されている

### 動的機能

- [ ] `!`プレフィックスのコマンドが安全
- [ ] `@`プレフィックスのファイルパスが制限されている
- [ ] 長時間実行コマンドを避けている
- [ ] バイナリファイルの参照を避けている

### スコープと構造

- [ ] 適切なスコープ（`.claude/commands/`または`~/.claude/commands/`）
- [ ] ファイル名が内容を反映
- [ ] 名前空間が適切に使用されている（必要な場合）
- [ ] 単一責任原則を遵守

### スキルとの境界

- [ ] 単一ファイルで完結
- [ ] 複雑すぎない（複数ステップのワークフローなし）
- [ ] 外部スクリプトや大量のロジックなし
- [ ] 必要に応じてスキル化を推奨

### セキュリティ

- [ ] コマンドインジェクション対策あり
- [ ] ファイルアクセスが制限されている
- [ ] 危険なBashコマンドなし（`rm -rf`など）
- [ ] 入力バリデーションあり
- [ ] `allowed-tools`で適切に制限（必要な場合）

### ドキュメントと明確性

- [ ] コマンドの目的が明確
- [ ] 期待される入力と出力が説明されている
- [ ] エッジケースや制限事項が記載されている
- [ ] コメントが適切に含まれている

## グレード判定ガイドライン

### 総合評価の決定

1. 各次元を個別に評価（A～F）
2. 重大な問題（Fまたは複数のD）がある場合、総合評価はC以下
3. セキュリティ問題がある場合、総合評価は必ずD以下
4. すべての次元がBまたはAの場合、総合評価はBまたはA
5. 混在している場合、最も低い次元に近いグレードを設定

### 改善提案の優先順位

1. **Critical**: セキュリティ問題、データ損失リスク → 即座に修正
2. **High**: 機能性の問題、誤動作の可能性 → 早急に修正
3. **Medium**: ベストプラクティス違反、最適化の余地 → 推奨修正
4. **Low**: スタイルや一貫性の改善 → 任意の改善

## 評価例

### 例1: 優秀なコマンド (A)

```markdown
---
description: "Create a new React component with TypeScript and tests"
argument-hint: "<component-name>"
model: sonnet
---

Create a new React component: $1

Include:
- TypeScript interface for props
- Functional component in src/components/$1/
- CSS module
- Test file with basic assertions

Ensure the component follows existing project patterns.
```

**評価**:
- フロントマター: A（完全かつ明確）
- 引数処理: A（明確な使用、バリデーション）
- 動的機能: B（使用なし、必須ではない）
- スコープと構造: A（適切）
- スキルとの境界: A（単純明快）
- セキュリティ: A（リスクなし）

**総合: A**

### 例2: 改善が必要なコマンド (D)

```markdown
Delete files: !rm -rf $ARGUMENTS
```

**評価**:
- フロントマター: F（なし）
- 引数処理: D（バリデーションなし）
- 動的機能: F（危険なコマンド）
- スコープと構造: C（不明確）
- スキルとの境界: A（単純）
- セキュリティ: F（重大な脆弱性）

**総合: F（セキュリティリスクにより自動的にF）**
